<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo</title>
  </head>
  <body>
    <pre id="output"></pre>

    <script>
      function maxSlidingWindow(nums, k) {
        const result = [];
        const deque = [];

        for (let i = 0; i < nums.length; i++) {
          // 移除不在滑动窗口范围内的元素
          if (deque.length > 0 && deque.length >= k) {
            deque.shift();
          }
          
          // 移除队列中比当前元素小的元素
          while (deque.length > 0 && nums[deque[deque.length - 1]] <= nums[i]) {
            deque.pop();
          }
          console.log('i, deque: ', i, deque);

          // 添加当前元素到队列中
          deque.push(i);
          
          // 将当前滑动窗口的最大值加入结果数组
          if (i >= k - 1) {
            result.push(nums[deque[0]]);
          }
        }

        return result;
      }


      const value = maxSlidingWindow([1, 3, -1, -3, 5, 3, 6, 7], 3);

      output.innerHTML = JSON.stringify(value, null, 4);
      // output.innerHTML = value
    </script>
  </body>
</html>
